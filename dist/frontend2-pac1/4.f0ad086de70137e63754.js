(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9N29":function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",(function(){return Ge}));var i=n("ofXK"),a=n("3Pt+"),o=n("tyNb"),r=n("fXoL"),s=n("kmKP");function c(e,t){1&e&&(r.Pb(0,"div",10),r.ic(1," Username is Mandatory "),r.Ob())}function l(e,t){1&e&&(r.Pb(0,"div",10),r.ic(1," Username has to be an email "),r.Ob())}function u(e,t){1&e&&(r.Pb(0,"div",10),r.ic(1," Password is Mandatory "),r.Ob())}function d(e,t){1&e&&(r.Pb(0,"div",11),r.ic(1," Wrong user or password, try again "),r.Ob())}let b=(()=>{class e{constructor(e,t,n){this.fb=e,this.userService=t,this.router=n,this.title="Login",this.wrongCredentials=!1}ngOnInit(){this.createForm()}createForm(){this.loginForm=this.fb.group({username:[null,[a.k.required,a.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:[null,[a.k.required]]})}login(){this.loginForm.valid?void 0===this.userService.userLoggedIn?this.userService.getUserByEmail(this.username.value).subscribe(e=>void 0===e?(this.wrongCredentials=!0,setTimeout(()=>this.wrongCredentials=!1,1e4),this.loginForm.reset(),void console.log("Username not found")):e.loggedIn?void console.log("User already logged in"):e.password!==this.password.value?(this.wrongCredentials=!0,setTimeout(()=>this.wrongCredentials=!1,1e4),this.loginForm.reset(),void console.log("Wrong password")):void this.userService.login(e).subscribe(()=>{this.wrongCredentials=!1,console.log(`User ${e.email} logged in succesfully`),this.router.navigate([""])})):console.log(`User ${this.userService.userLoggedIn.email} must logout first`):console.log("This form is in an invalid state")}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-login"]],decls:16,vars:7,consts:[[1,"section-title"],[1,"form-group"],[3,"formGroup","ngSubmit"],[1,"username"],["type","email","placeholder","Username","name","username","formControlName","username",1,"username-input"],["class","error",4,"ngIf"],[1,"password"],["type","password","placeholder","Password","name","password","formControlName","password","autocomplete","on",1,"password-input"],["class","error-form",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"error"],[1,"error-form"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.Pb(3,"div",1),r.Pb(4,"form",2),r.Wb("ngSubmit",(function(){return t.login()})),r.Pb(5,"div",3),r.Lb(6,"input",4),r.hc(7,c,2,0,"div",5),r.hc(8,l,2,0,"div",5),r.Ob(),r.Pb(9,"div",6),r.Lb(10,"input",7),r.hc(11,u,2,0,"div",5),r.Ob(),r.Pb(12,"div"),r.hc(13,d,2,0,"div",8),r.Pb(14,"button",9),r.ic(15,"Login"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(2),r.bc("formGroup",t.loginForm),r.Ab(3),r.bc("ngIf",t.username.dirty&&t.username.invalid),r.Ab(1),r.bc("ngIf",t.username.dirty&&t.username.invalid&&""!==t.username.value),r.Ab(3),r.bc("ngIf",t.loginForm.get("password").dirty&&t.loginForm.get("password").invalid),r.Ab(2),r.bc("ngIf",t.wrongCredentials),r.Ab(1),r.bc("disabled",!t.loginForm.valid))},directives:[a.m,a.g,a.d,a.a,a.f,a.c,i.i],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.1rem}.password[_ngcontent-%COMP%], .username[_ngcontent-%COMP%]{margin:15px;position:relative}.password-input[_ngcontent-%COMP%], .username-input[_ngcontent-%COMP%]{margin:0;padding:10px;width:25vw}.login-button[_ngcontent-%COMP%]{padding:10px;width:15vw;margin-bottom:50px}.error[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto;position:absolute;top:0;left:62vw}.error[_ngcontent-%COMP%], .error-form[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede;padding:10px;border:1px solid #ebccd1;border-radius:4px;font-size:.8rem}.error-form[_ngcontent-%COMP%]{margin:15px auto;width:25vw}"]}),e})();const g=["tourist","company"];function m(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Username is Mandatory "),r.Ob())}function p(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Username has to be greater than 2 characters "),r.Ob())}function h(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Username has to be lesser than 56 characters "),r.Ob())}function f(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Username has to be alphabetic without begining nor ending spaces "),r.Ob())}function v(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Surname has to be greater than 2 characters "),r.Ob())}function P(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Surname has to be lesser than 56 characters "),r.Ob())}function O(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Surname has to be alphabetic without begining nor ending spaces "),r.Ob())}function y(e,t){if(1&e&&(r.Pb(0,"option"),r.ic(1),r.Ob()),2&e){const e=t.$implicit;r.Ab(1),r.kc(" ",e," ")}}function w(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Email is Mandatory "),r.Ob())}function I(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Email has to be correct "),r.Ob())}function C(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Email alredy used, choose another one "),r.Ob())}function M(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Password is Mandatory "),r.Ob())}function x(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Password has to be greater than 7 characters "),r.Ob())}function A(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Repeated password is Mandatory "),r.Ob())}function _(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Repeated password has to be greater than 7 characters "),r.Ob())}function F(e,t){1&e&&(r.Pb(0,"div",20),r.ic(1," Passwords didn't match "),r.Ob())}function k(e,t){1&e&&(r.Pb(0,"div",21),r.ic(1," This email is already in use, choose another one "),r.Ob())}let L=(()=>{class e{constructor(e,t,n){this.fb=e,this.userService=t,this.router=n,this.userTypes=g,this.title="Register",this.wrongEmail=!1}ngOnInit(){this.createForm()}createForm(){this.registerForm=this.fb.group({name:[null,[a.k.required,a.k.minLength(3),a.k.maxLength(55),a.k.pattern("^(?![ ])(?!.*[ ]$)[a-zA-Z ]+$")]],surname:[null,[a.k.minLength(3),a.k.maxLength(55),a.k.pattern("^(?![ ])(?!.*[ ]$)[a-zA-Z ]+$")]],type:[null,[a.k.required]],email:[null,[a.k.required,a.k.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:[null,[a.k.required,a.k.minLength(8)]],repeatPassword:[null,[a.k.required,a.k.minLength(8)]]})}register(){if(this.registerForm.valid){if(void 0!==this.userService.userLoggedIn)return void console.log(`User ${this.userService.userLoggedIn.email} must logout first`);this.userService.getUserByEmail(this.email.value).subscribe(e=>{if(void 0===e){const e={name:this.name.value,surname:this.surname.value,type:this.type.value,email:this.email.value,password:this.password.value,loggedIn:!0,education:[],languages:[]};this.userService.register(e).subscribe(()=>{this.wrongEmail=!1,console.log(`User ${e.email} registered successfully`),this.router.navigate([""])})}else this.wrongEmail=!0,setTimeout(()=>this.wrongEmail=!1,1e4),this.email.setErrors({alreadyUsed:!0}),this.password.reset(),this.repeatPassword.reset(),console.log(`User ${e.email} is already registered`)})}}get name(){return this.registerForm.get("name")}get surname(){return this.registerForm.get("surname")}get type(){return this.registerForm.get("type")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get repeatPassword(){return this.registerForm.get("repeatPassword")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-register"]],decls:39,vars:20,consts:[[1,"section-title"],[1,"form-group"],[3,"formGroup","ngSubmit"],[1,"name"],["type","text","placeholder","Name","name","name","formControlName","name",1,"name-input"],["class","error",4,"ngIf"],[1,"surname"],["type","text","placeholder","Surname","name","surname","formControlName","surname",1,"surname-input"],[1,"type"],["formControlName","type",1,"type-input"],["value","","selected",""],[4,"ngFor","ngForOf"],[1,"email"],["type","email","placeholder","Email","name","email","formControlName","email","autocomplete","username",1,"email-input"],[1,"password"],["type","password","placeholder","Password","name","password","formControlName","password","autocomplete","new-password",1,"password-input"],[1,"repeat-password"],["type","password","placeholder","Repeat Password","name","repeatPassword","formControlName","repeatPassword","autocomplete","new-password",1,"repeat-password-input"],["class","error-form",4,"ngIf"],["type","submit",1,"register-button",3,"disabled"],[1,"error"],[1,"error-form"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.Pb(3,"div",1),r.Pb(4,"form",2),r.Wb("ngSubmit",(function(){return t.register()})),r.Pb(5,"div",3),r.Lb(6,"input",4),r.hc(7,m,2,0,"div",5),r.hc(8,p,2,0,"div",5),r.hc(9,h,2,0,"div",5),r.hc(10,f,2,0,"div",5),r.Ob(),r.Pb(11,"div",6),r.Lb(12,"input",7),r.hc(13,v,2,0,"div",5),r.hc(14,P,2,0,"div",5),r.hc(15,O,2,0,"div",5),r.Ob(),r.Pb(16,"div",8),r.Pb(17,"select",9),r.Pb(18,"option",10),r.ic(19,"Select type of account"),r.Ob(),r.hc(20,y,2,1,"option",11),r.Ob(),r.Ob(),r.Pb(21,"div",12),r.Lb(22,"input",13),r.hc(23,w,2,0,"div",5),r.hc(24,I,2,0,"div",5),r.hc(25,C,2,0,"div",5),r.Ob(),r.Pb(26,"div",14),r.Lb(27,"input",15),r.hc(28,M,2,0,"div",5),r.hc(29,x,2,0,"div",5),r.Ob(),r.Pb(30,"div",16),r.Lb(31,"input",17),r.hc(32,A,2,0,"div",5),r.hc(33,_,2,0,"div",5),r.hc(34,F,2,0,"div",5),r.Ob(),r.Pb(35,"div"),r.hc(36,k,2,0,"div",18),r.Pb(37,"button",19),r.ic(38,"Register"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(2),r.bc("formGroup",t.registerForm),r.Ab(3),r.bc("ngIf",t.name.invalid&&t.name.dirty&&""===t.name.value),r.Ab(1),r.bc("ngIf",t.name.dirty&&t.name.invalid&&t.name.value.length<3&&t.name.value.length>0),r.Ab(1),r.bc("ngIf",t.name.dirty&&t.name.invalid&&t.name.value.length>55),r.Ab(1),r.bc("ngIf",t.name.dirty&&t.name.invalid&&t.name.value.length>=3&&t.name.value.length<=55),r.Ab(3),r.bc("ngIf",t.surname.dirty&&t.surname.invalid&&t.surname.value.length<3&&t.surname.value.length>0),r.Ab(1),r.bc("ngIf",t.surname.dirty&&t.surname.invalid&&t.surname.value.length>55),r.Ab(1),r.bc("ngIf",t.surname.dirty&&t.surname.invalid&&t.surname.value.length>=3&&t.surname.value.length<=55),r.Ab(5),r.bc("ngForOf",t.userTypes),r.Ab(3),r.bc("ngIf",t.email.invalid&&t.email.dirty&&""===t.email.value),r.Ab(1),r.bc("ngIf",t.email.dirty&&t.email.invalid&&""!==t.email.value&&!(null!=t.email.errors&&t.email.errors.alreadyUsed)),r.Ab(1),r.bc("ngIf",t.email.invalid&&(null==t.email.errors?null:t.email.errors.alreadyUsed)),r.Ab(3),r.bc("ngIf",t.password.invalid&&t.password.dirty&&""===t.password.value),r.Ab(1),r.bc("ngIf",t.password.dirty&&t.password.invalid&&t.password.value.length<8&&t.password.value.length>0),r.Ab(3),r.bc("ngIf",t.repeatPassword.invalid&&t.repeatPassword.dirty&&""===t.repeatPassword.value),r.Ab(1),r.bc("ngIf",t.repeatPassword.dirty&&t.repeatPassword.invalid&&t.repeatPassword.value.length<8&&t.repeatPassword.value.length>0),r.Ab(1),r.bc("ngIf",t.repeatPassword.dirty&&t.repeatPassword.valid&&t.repeatPassword.value!==t.password.value),r.Ab(2),r.bc("ngIf",t.wrongEmail),r.Ab(1),r.bc("disabled",!t.registerForm.valid||t.repeatPassword.value!==t.password.value))},directives:[a.m,a.g,a.d,a.a,a.f,a.c,i.i,a.j,a.h,a.l,i.h],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.1rem}.email[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .password[_ngcontent-%COMP%], .repeat-password[_ngcontent-%COMP%], .surname[_ngcontent-%COMP%], .type[_ngcontent-%COMP%]{margin:15px;position:relative}.email-input[_ngcontent-%COMP%], .name-input[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%], .repeat-password-input[_ngcontent-%COMP%], .surname-input[_ngcontent-%COMP%], .type-input[_ngcontent-%COMP%]{margin:0;padding:10px;width:25vw}.register-button[_ngcontent-%COMP%]{padding:10px;width:15vw;margin-bottom:50px}.error[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto;position:absolute;top:0;left:62vw}.error[_ngcontent-%COMP%], .error-form[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede;padding:10px;border:1px solid #ebccd1;border-radius:4px;font-size:.8rem}.error-form[_ngcontent-%COMP%]{margin:15px auto;width:25vw}"]}),e})(),N=(()=>{class e{constructor(e,t){this.userService=e,this.router=t}ngOnInit(){this.logout(),this.router.navigate([""])}logout(){void 0!==this.userService.userLoggedIn?this.userService.logout().subscribe(e=>console.log("User logged out")):console.log("Nobody logged in at the moment")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-logout"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();const D=["ES","FR","IT","PT"],S=e=>{if("ES"!=e.get("nationality").value)return null;const t=e.get("nif").value;return null==t||""==t?null:function(e){const t=e.slice(-1),n=parseInt(e.slice(0,e.length-1));return NaN==n||"TRWAGMYFPDXBNJZSQVHLCKE".charAt(n%23)!=t.toUpperCase()}(t)?{nifValidationResult:!0}:null};function E(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Username is Mandatory "),r.Ob())}function U(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Username has to be greater than 2 characters "),r.Ob())}function $(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Username has to be lesser than 56 characters "),r.Ob())}function Y(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Username has to be alphabetic without begining nor ending spaces "),r.Ob())}function z(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Surname has to be greater than 2 characters "),r.Ob())}function K(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Surname has to be lesser than 56 characters "),r.Ob())}function T(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Surname has to be alphabetic without begining nor ending spaces "),r.Ob())}function R(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Birth date has to be in DD/MM/YYYY format "),r.Ob())}function j(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Phone has to be numeric "),r.Ob())}function G(e,t){if(1&e&&(r.Pb(0,"option",27),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(2);r.bc("selected",n.user.nationality==e),r.Ab(1),r.kc(" ",e," ")}}function q(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," If nationality is set to ES, NIF field has to be in the following format 00000000A "),r.Ob())}function W(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Company name has to be greater than 2 characters "),r.Ob())}function V(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Comapny name has to be lesser than 256 characters "),r.Ob())}function B(e,t){1&e&&(r.Pb(0,"div",26),r.ic(1," Company name has to be alphabetic without begining nor ending spaces "),r.Ob())}function Q(e,t){if(1&e&&(r.Pb(0,"div",28),r.Lb(1,"input",29),r.hc(2,W,2,0,"div",6),r.hc(3,V,2,0,"div",6),r.hc(4,B,2,0,"div",6),r.Ob()),2&e){const e=r.Yb(2);r.Ab(2),r.bc("ngIf",e.companyName.dirty&&e.companyName.invalid&&e.companyName.value.length<3&&e.companyName.value.length>0),r.Ab(1),r.bc("ngIf",e.companyName.dirty&&e.companyName.invalid&&e.companyName.value.length>255),r.Ab(1),r.bc("ngIf",e.companyName.dirty&&e.companyName.invalid&&e.companyName.value.length>=3&&e.companyName.value.length<=255)}}function Z(e,t){1&e&&(r.Pb(0,"div",30),r.Lb(1,"input",31),r.Ob())}function H(e,t){1&e&&(r.Pb(0,"div",32),r.Lb(1,"input",33),r.Ob())}function J(e,t){1&e&&(r.Pb(0,"div",34),r.ic(1," Profile successfully updated "),r.Ob())}function X(e,t){if(1&e){const e=r.Qb();r.Pb(0,"form",3),r.Wb("ngSubmit",(function(){return r.ec(e),r.Yb().updateProfile()})),r.Pb(1,"div",4),r.Lb(2,"input",5),r.hc(3,E,2,0,"div",6),r.hc(4,U,2,0,"div",6),r.hc(5,$,2,0,"div",6),r.hc(6,Y,2,0,"div",6),r.Ob(),r.Pb(7,"div",7),r.Lb(8,"input",8),r.hc(9,z,2,0,"div",6),r.hc(10,K,2,0,"div",6),r.hc(11,T,2,0,"div",6),r.Ob(),r.Pb(12,"div",9),r.Lb(13,"input",10),r.hc(14,R,2,0,"div",6),r.Ob(),r.Pb(15,"div",11),r.Lb(16,"input",12),r.hc(17,j,2,0,"div",6),r.Ob(),r.Pb(18,"div",13),r.Pb(19,"select",14),r.Pb(20,"option",15),r.ic(21,"Select your nationality"),r.Ob(),r.hc(22,G,2,2,"option",16),r.Ob(),r.Ob(),r.Pb(23,"div",17),r.Lb(24,"input",18),r.hc(25,q,2,0,"div",6),r.Ob(),r.Pb(26,"div",19),r.Lb(27,"textarea",20),r.Ob(),r.hc(28,Q,5,3,"div",21),r.hc(29,Z,2,0,"div",22),r.hc(30,H,2,0,"div",23),r.Pb(31,"div"),r.hc(32,J,2,0,"div",24),r.Pb(33,"button",25),r.ic(34," Update Profile "),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.bc("formGroup",e.profileForm),r.Ab(3),r.bc("ngIf",e.name.invalid&&e.name.dirty&&""===e.name.value),r.Ab(1),r.bc("ngIf",e.name.dirty&&e.name.invalid&&e.name.value.length<3&&e.name.value.length>0),r.Ab(1),r.bc("ngIf",e.name.dirty&&e.name.invalid&&e.name.value.length>55),r.Ab(1),r.bc("ngIf",e.name.dirty&&e.name.invalid&&e.name.value.length>=3&&e.name.value.length<=55),r.Ab(3),r.bc("ngIf",e.surname.dirty&&e.surname.invalid&&e.surname.value.length<3&&e.surname.value.length>0),r.Ab(1),r.bc("ngIf",e.surname.dirty&&e.surname.invalid&&e.surname.value.length>55),r.Ab(1),r.bc("ngIf",e.surname.dirty&&e.surname.invalid&&e.surname.value.length>=3&&e.surname.value.length<=55),r.Ab(3),r.bc("ngIf",e.birthDate.dirty&&e.birthDate.invalid),r.Ab(3),r.bc("ngIf",e.phone.dirty&&e.phone.invalid),r.Ab(3),r.bc("selected",null==e.user.nationality),r.Ab(2),r.bc("ngForOf",e.nationalities),r.Ab(3),r.bc("ngIf",null==e.profileForm.errors?null:e.profileForm.errors.nifValidationResult),r.Ab(3),r.bc("ngIf","company"===e.user.type),r.Ab(1),r.bc("ngIf","company"===e.user.type),r.Ab(1),r.bc("ngIf","company"===e.user.type),r.Ab(2),r.bc("ngIf",e.profileSaved),r.Ab(1),r.bc("disabled",!e.profileForm.valid)}}let ee=(()=>{class e{constructor(e,t,n){this.fb=e,this.us=t,this.router=n,this.title="Profile",this.aboutMePlaceholder="About me...",this.nationalities=D,this.profileSaved=!1}ngOnInit(){this.user=this.us.userLoggedIn,this.createForm(),this.profileForm.valueChanges.subscribe(()=>this.us.profileDataSaved=!1)}createForm(){this.profileForm=this.fb.group({name:[this.user.name,[a.k.required,a.k.minLength(3),a.k.maxLength(55),a.k.pattern("^(?![ ])(?!.*[ ]$)[a-zA-Z ]+$")]],surname:[this.user.surname,[a.k.minLength(3),a.k.maxLength(55),a.k.pattern("^(?![ ])(?!.*[ ]$)[a-zA-Z ]+$")]],birthDate:[this.user.birthDate,a.k.pattern("^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]\\d{4}$")],phone:[this.user.phone,a.k.pattern("^[0-9]+$")],nationality:[this.user.nationality],nif:[this.user.nif],aboutMe:[this.user.aboutMe?this.user.aboutMe:this.aboutMePlaceholder]},{validators:S}),"company"===this.user.type&&(this.profileForm.addControl("companyName",this.fb.control(this.user.companyName,[a.k.required,a.k.minLength(3),a.k.maxLength(55),a.k.pattern("^(?![ ])(?!.*[ ]$)[a-zA-Z ]+$")])),this.profileForm.addControl("companyDescription",this.fb.control(this.user.companyDescription)),this.profileForm.addControl("cif",this.fb.control(this.user.cif)))}updateProfile(){if(this.profileForm.valid){const e={id:this.user.id,name:this.name.value,surname:this.surname.value,type:this.user.type,email:this.user.email,password:this.user.password,birthDate:this.birthDate.value,phone:this.phone.value,nationality:this.nationality.value,nif:this.nif.value,aboutMe:this.aboutMe.value!==this.aboutMePlaceholder?this.aboutMe.value:null,loggedIn:this.user.loggedIn,education:this.user.education,languages:this.user.languages};"company"===this.user.type&&(e.companyName=this.companyName.value,e.companyDescription=this.companyDescription.value,e.cif=this.cif.value),this.us.updateUser(e).subscribe(()=>{this.profileSaved=!0,this.us.profileDataSaved=!0,setTimeout(()=>this.profileSaved=!1,1e4),console.log(`User ${e.email} updated, new values:`,e)})}}get name(){return this.profileForm.get("name")}get surname(){return this.profileForm.get("surname")}get birthDate(){return this.profileForm.get("birthDate")}get phone(){return this.profileForm.get("phone")}get nationality(){return this.profileForm.get("nationality")}get nif(){return this.profileForm.get("nif")}get aboutMe(){return this.profileForm.get("aboutMe")}get companyName(){return this.profileForm.get("companyName")}get companyDescription(){return this.profileForm.get("companyDescription")}get cif(){return this.profileForm.get("cif")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-personal-data"]],decls:5,vars:2,consts:[[1,"section-title"],[1,"form-group"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"name"],["type","text","placeholder","Name","name","name","formControlName","name",1,"name-input"],["class","error",4,"ngIf"],[1,"surname"],["type","text","placeholder","Surname","name","surname","formControlName","surname",1,"surname-input"],[1,"birth-date"],["type","text","placeholder","Birth date","name","birthDate","formControlName","birthDate",1,"birth-date-input"],[1,"phone"],["type","text","placeholder","Phone number","name","phone","formControlName","phone",1,"phone-input"],[1,"nationality"],["formControlName","nationality",1,"nationality-input"],["value","",3,"selected"],[3,"selected",4,"ngFor","ngForOf"],[1,"nif"],["type","text","placeholder","NIF","name","nif","formControlName","nif",1,"nif-input"],[1,"about-me"],["name","aboutMe","formControlName","aboutMe",1,"about-me-input"],["class","company-name",4,"ngIf"],["class","company-description",4,"ngIf"],["class","cif",4,"ngIf"],["class","success-alert",4,"ngIf"],["type","submit",1,"update-profile-button",3,"disabled"],[1,"error"],[3,"selected"],[1,"company-name"],["type","text","placeholder","Comapny name","name","companyName","formControlName","companyName",1,"company-name-input"],[1,"company-description"],["type","text","placeholder","Company description","name","companyDescription","formControlName","companyDescription",1,"company-description-input"],[1,"cif"],["type","text","placeholder","CIF","name","cif","formControlName","cif",1,"cif-input"],[1,"success-alert"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.Pb(3,"div",1),r.hc(4,X,35,18,"form",2),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(2),r.bc("ngIf",t.user))},directives:[i.i,a.m,a.g,a.d,a.a,a.f,a.c,a.j,a.h,a.l,i.h],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.1rem;text-align:left;border-bottom:1px solid #a9a9a9}.about-me[_ngcontent-%COMP%], .birth-date[_ngcontent-%COMP%], .cif[_ngcontent-%COMP%], .company-description[_ngcontent-%COMP%], .company-name[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .nationality[_ngcontent-%COMP%], .nif[_ngcontent-%COMP%], .phone[_ngcontent-%COMP%], .surname[_ngcontent-%COMP%]{margin:15px;position:relative}.about-me-input[_ngcontent-%COMP%], .birth-date-input[_ngcontent-%COMP%], .cif-input[_ngcontent-%COMP%], .company-description-input[_ngcontent-%COMP%], .company-name-input[_ngcontent-%COMP%], .name-input[_ngcontent-%COMP%], .nationality-input[_ngcontent-%COMP%], .nif-input[_ngcontent-%COMP%], .phone-input[_ngcontent-%COMP%], .surname-input[_ngcontent-%COMP%]{margin:0;padding:10px;width:350px}.about-me-input[_ngcontent-%COMP%]{height:75px}.update-profile-button[_ngcontent-%COMP%]{padding:10px;width:210px;margin-bottom:50px}.error[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede;border:1px solid #ebccd1;border-radius:4px;margin-right:auto;margin-left:auto;position:absolute;top:0;left:62vw}.error[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{padding:10px;font-size:.8rem}.success-alert[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border:1px solid #c3e6cb;border-radius:4px;margin:15px auto;width:25vw}"]}),e})();function te(e,t){1&e&&(r.Pb(0,"div",8),r.Pb(1,"span",9),r.ic(2,"TYPE"),r.Ob(),r.Pb(3,"span",9),r.ic(4,"LEVEL"),r.Ob(),r.Pb(5,"span",9),r.ic(6,"NAME"),r.Ob(),r.Pb(7,"span",9),r.ic(8,"UNIVERSITY"),r.Ob(),r.Pb(9,"span",9),r.ic(10,"FINISH DATE"),r.Ob(),r.Pb(11,"span",9),r.ic(12,"ACTIONS"),r.Ob(),r.Ob())}function ne(e,t){1&e&&(r.Pb(0,"div",10),r.ic(1," No Education to show at the moment... "),r.Ob())}function ie(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",10),r.Pb(1,"span",11),r.ic(2),r.Ob(),r.Pb(3,"span",11),r.ic(4),r.Ob(),r.Pb(5,"span",11),r.ic(6),r.Ob(),r.Pb(7,"span",11),r.ic(8),r.Ob(),r.Pb(9,"span",11),r.ic(10),r.Ob(),r.Pb(11,"span",11),r.Pb(12,"a",12),r.Wb("click",(function(){r.ec(e);const n=t.index,i=t.$implicit;return r.Yb(2).updateEducation(n,i)})),r.Pb(13,"span",13),r.ic(14," edit "),r.Ob(),r.Ob(),r.Pb(15,"a",14),r.Wb("click",(function(){r.ec(e);const n=t.index;return r.Yb(2).deleteEducation(n)})),r.Pb(16,"span",15),r.ic(17," delete "),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit;r.Ab(2),r.jc(e.type),r.Ab(2),r.jc(e.level),r.Ab(2),r.jc(e.name),r.Ab(2),r.jc(e.university),r.Ab(2),r.jc(e.finishDate)}}function ae(e,t){if(1&e&&(r.Pb(0,"div",4),r.hc(1,te,13,0,"div",5),r.hc(2,ne,2,0,"div",6),r.hc(3,ie,18,5,"div",7),r.Ob()),2&e){const e=r.Yb();r.Ab(1),r.bc("ngIf",0!=e.user.education.length),r.Ab(1),r.bc("ngIf",0==e.user.education.length),r.Ab(1),r.bc("ngForOf",e.user.education)}}let oe=(()=>{class e{constructor(e,t,n){this.fb=e,this.us=t,this.router=n,this.title="Education"}ngOnInit(){this.user=this.us.userLoggedIn}createEducation(){this.router.navigate(["/user/education"])}updateEducation(e,t){this.router.navigate(["/user/education",e]),console.log("update education:",e,t)}deleteEducation(e){confirm("You are about to delete an education record. Are you sure?")&&(this.user.education.splice(e,1),this.us.updateUser(this.user).subscribe(()=>console.log(`Education ${e} deleted`)))}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-education"]],decls:7,vars:2,consts:[[1,"section-title"],["class","education-content",4,"ngIf"],[1,"education-new-button-container"],["type","submit",1,"education-new-button",3,"click"],[1,"education-content"],["class","education-header education-row",4,"ngIf"],["class","education-row",4,"ngIf"],["class","education-row",4,"ngFor","ngForOf"],[1,"education-header","education-row"],[1,"education-header-item"],[1,"education-row"],[1,"education-item"],[1,"update-education-link",3,"routerLink","click"],[1,"material-icons","edit"],[1,"delete-education-link",3,"routerLink","click"],[1,"material-icons","delete"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.hc(3,ae,4,3,"div",1),r.Pb(4,"div",2),r.Pb(5,"button",3),r.Wb("click",(function(){return t.createEducation()})),r.ic(6," New Education "),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(1),r.bc("ngIf",t.user.education))},directives:[i.i,i.h,o.d],styles:['@font-face{font-family:Material Icons;font-style:normal;font-weight:400;src:url(MaterialIcons-Regular.4674f8ded773cb03e824.eot);src:local("Material Icons"),local("MaterialIcons-Regular"),url(MaterialIcons-Regular.cff684e59ffb052d72cb.woff2) format("woff2"),url(MaterialIcons-Regular.83bebaf37c09c7e1c3ee.woff) format("woff"),url(MaterialIcons-Regular.5e7382c63da0098d634a.ttf) format("truetype")}.material-icons[_ngcontent-%COMP%]{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;text-align:left;border-bottom:1px solid #a9a9a9}.education-content[_ngcontent-%COMP%]{margin:15px}.education-header[_ngcontent-%COMP%], .education-row[_ngcontent-%COMP%]{margin:15px 0;display:table;width:100%;table-layout:fixed}.education-header[_ngcontent-%COMP%]{border-bottom:1px solid #a9a9a9}.education-header-item[_ngcontent-%COMP%], .education-item[_ngcontent-%COMP%]{display:table-cell;padding:5px 0}.education-item[_ngcontent-%COMP%]{text-align:left;padding-left:15px;font-size:.9rem;vertical-align:middle}.education-item[_ngcontent-%COMP%]:last-child{text-align:center;padding-left:0}.delete[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]{color:#000}.delete[_ngcontent-%COMP%]:hover, .edit[_ngcontent-%COMP%]:hover{color:rgba(2,15,20,.5)}.delete-education-link[_ngcontent-%COMP%], .update-education-link[_ngcontent-%COMP%]{text-decoration:none;margin:0 5px}.education-new-button[_ngcontent-%COMP%]{padding:10px;width:210px;margin-bottom:50px}']}),e})();function re(e,t){1&e&&(r.Pb(0,"div",8),r.Pb(1,"span",9),r.ic(2,"LANGUAGE"),r.Ob(),r.Pb(3,"span",9),r.ic(4,"LEVEL"),r.Ob(),r.Pb(5,"span",9),r.ic(6,"FINISH DATE"),r.Ob(),r.Pb(7,"span",9),r.ic(8,"ACTIONS"),r.Ob(),r.Ob())}function se(e,t){1&e&&(r.Pb(0,"div",10),r.ic(1," No languages to show at the moment... "),r.Ob())}function ce(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",10),r.Pb(1,"span",11),r.ic(2),r.Ob(),r.Pb(3,"span",11),r.ic(4),r.Ob(),r.Pb(5,"span",11),r.ic(6),r.Ob(),r.Pb(7,"span",11),r.Pb(8,"a",12),r.Wb("click",(function(){r.ec(e);const n=t.index,i=t.$implicit;return r.Yb(2).updateLanguage(n,i)})),r.Pb(9,"span",13),r.ic(10," edit "),r.Ob(),r.Ob(),r.Pb(11,"a",14),r.Wb("click",(function(){r.ec(e);const n=t.index;return r.Yb(2).deleteLanguage(n)})),r.Pb(12,"span",15),r.ic(13," delete "),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=t.$implicit;r.Ab(2),r.jc(e.name),r.Ab(2),r.jc(e.level),r.Ab(2),r.jc(e.finishDate)}}function le(e,t){if(1&e&&(r.Pb(0,"div",4),r.hc(1,re,9,0,"div",5),r.hc(2,se,2,0,"div",6),r.hc(3,ce,14,3,"div",7),r.Ob()),2&e){const e=r.Yb();r.Ab(1),r.bc("ngIf",0!=e.user.languages.length),r.Ab(1),r.bc("ngIf",0==e.user.languages.length),r.Ab(1),r.bc("ngForOf",e.user.languages)}}let ue=(()=>{class e{constructor(e,t,n){this.fb=e,this.us=t,this.router=n,this.title="Languages"}ngOnInit(){this.user=this.us.userLoggedIn}createLanguage(){this.router.navigate(["/user/language"])}updateLanguage(e,t){this.router.navigate(["/user/language",e]),console.log("update education:",e,t)}deleteLanguage(e){confirm("You are about to delete a language record. Are you sure?")&&(this.user.languages.splice(e,1),this.us.updateUser(this.user).subscribe(()=>console.log(`Language ${e} deleted`)))}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-language"]],decls:7,vars:2,consts:[[1,"section-title"],["class","language-content",4,"ngIf"],[1,"language-new-button-container"],["type","submit",1,"language-new-button",3,"click"],[1,"language-content"],["class","language-header language-row",4,"ngIf"],["class","language-row",4,"ngIf"],["class","language-row",4,"ngFor","ngForOf"],[1,"language-header","language-row"],[1,"language-header-item"],[1,"language-row"],[1,"language-item"],[1,"update-language-link",3,"routerLink","click"],[1,"material-icons","edit"],[1,"delete-language-link",3,"routerLink","click"],[1,"material-icons","delete"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.hc(3,le,4,3,"div",1),r.Pb(4,"div",2),r.Pb(5,"button",3),r.Wb("click",(function(){return t.createLanguage()})),r.ic(6," New Language "),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(1),r.bc("ngIf",t.user.languages))},directives:[i.i,i.h,o.d],styles:['@font-face{font-family:Material Icons;font-style:normal;font-weight:400;src:url(MaterialIcons-Regular.4674f8ded773cb03e824.eot);src:local("Material Icons"),local("MaterialIcons-Regular"),url(MaterialIcons-Regular.cff684e59ffb052d72cb.woff2) format("woff2"),url(MaterialIcons-Regular.83bebaf37c09c7e1c3ee.woff) format("woff"),url(MaterialIcons-Regular.5e7382c63da0098d634a.ttf) format("truetype")}.material-icons[_ngcontent-%COMP%]{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;text-align:left;border-bottom:1px solid #a9a9a9}.language-content[_ngcontent-%COMP%]{margin:15px}.language-header[_ngcontent-%COMP%], .language-row[_ngcontent-%COMP%]{margin:15px 0;display:table;width:100%;table-layout:fixed}.language-header[_ngcontent-%COMP%]{border-bottom:1px solid #a9a9a9}.language-header-item[_ngcontent-%COMP%], .language-item[_ngcontent-%COMP%]{display:table-cell;padding:5px 0}.language-item[_ngcontent-%COMP%]{text-align:left;padding-left:7rem;font-size:.9rem;vertical-align:middle}.language-item[_ngcontent-%COMP%]:last-child{text-align:center;padding-left:0}.delete[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]{color:#000}.delete[_ngcontent-%COMP%]:hover, .edit[_ngcontent-%COMP%]:hover{color:rgba(2,15,20,.5)}.delete-language-link[_ngcontent-%COMP%], .update-language-link[_ngcontent-%COMP%]{text-decoration:none;margin:0 5px}.language-new-button[_ngcontent-%COMP%]{padding:10px;width:210px;margin-bottom:50px}']}),e})(),de=(()=>{class e{constructor(e){this.us=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(s.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-profile"]],decls:3,vars:0,template:function(e,t){1&e&&(r.Lb(0,"app-personal-data"),r.Lb(1,"app-education"),r.Lb(2,"app-language"))},directives:[ee,oe,ue],styles:[""]}),e})(),be=(()=>{class e{constructor(e){this.userService=e}canActivate(){return void 0===this.userService.userLoggedIn}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(s.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ge=n("5BIm");let me=(()=>{class e{constructor(e){this.userService=e}canDeactivate(){return!!this.userService.profileDataSaved||confirm("Profile data not saved. If you continue all canges will be lost. Do you really want to continue?")}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(s.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e})();const pe=["T\xedtol universitari","Cicle formatiu"],he=["Grau","Diplomat","Llicenciat","Enginyer","M\xe0ster","Doctorat"],fe=["Grau superior","Grau Mitj\xe0"];function ve(e,t){if(1&e&&(r.Pb(0,"option",15),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(2);r.bc("selected",(null==n.education?null:n.education.type)==e),r.Ab(1),r.kc(" ",e," ")}}function Pe(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Type of education is mandatory "),r.Ob())}function Oe(e,t){if(1&e&&(r.Pb(0,"option",15),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(3);r.bc("selected",(null==n.education?null:n.education.level)==e),r.Ab(1),r.kc(" ",e," ")}}function ye(e,t){if(1&e&&(r.Nb(0),r.hc(1,Oe,2,2,"option",7),r.Mb()),2&e){const e=r.Yb(2);r.Ab(1),r.bc("ngForOf",e.universityLevels)}}function we(e,t){if(1&e&&(r.Pb(0,"option",15),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(3);r.bc("selected",(null==n.education?null:n.education.level)==e),r.Ab(1),r.kc(" ",e," ")}}function Ie(e,t){if(1&e&&(r.Nb(0),r.hc(1,we,2,2,"option",7),r.Mb()),2&e){const e=r.Yb(2);r.Ab(1),r.bc("ngForOf",e.cicleLevels)}}function Ce(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Level acomplished is mandatory "),r.Ob())}function Me(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Username is Mandatory "),r.Ob())}function xe(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Username has to be greater than 2 characters "),r.Ob())}function Ae(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Username has to be lesser than 56 characters "),r.Ob())}function _e(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," University name is Mandatory "),r.Ob())}function Fe(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Univserity name has to be greater than 2 characters "),r.Ob())}function ke(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Univserity name has to be lesser than 56 characters "),r.Ob())}function Le(e,t){1&e&&(r.Pb(0,"div",16),r.ic(1," Finish date has to be in DD/MM/YYYY format "),r.Ob())}function Ne(e,t){if(1&e){const e=r.Qb();r.Pb(0,"form",3),r.Wb("ngSubmit",(function(){return r.ec(e),r.Yb().handleEducationForm()})),r.Pb(1,"div",4),r.Pb(2,"select",5),r.Pb(3,"option",6),r.ic(4,"Select education type"),r.Ob(),r.hc(5,ve,2,2,"option",7),r.Ob(),r.hc(6,Pe,2,0,"div",8),r.Ob(),r.Pb(7,"div",4),r.Pb(8,"select",9),r.Pb(9,"option",6),r.ic(10,"Select education level"),r.Ob(),r.hc(11,ye,2,1,"ng-container",10),r.hc(12,Ie,2,1,"ng-container",10),r.Ob(),r.hc(13,Ce,2,0,"div",8),r.Ob(),r.Pb(14,"div",4),r.Lb(15,"input",11),r.hc(16,Me,2,0,"div",8),r.hc(17,xe,2,0,"div",8),r.hc(18,Ae,2,0,"div",8),r.Ob(),r.Pb(19,"div",4),r.Lb(20,"input",12),r.hc(21,_e,2,0,"div",8),r.hc(22,Fe,2,0,"div",8),r.hc(23,ke,2,0,"div",8),r.Ob(),r.Pb(24,"div",4),r.Lb(25,"input",13),r.hc(26,Le,2,0,"div",8),r.Ob(),r.Pb(27,"button",14),r.ic(28),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.bc("formGroup",e.educationForm),r.Ab(3),r.bc("selected",null==(null==e.education?null:e.education.type)),r.Ab(2),r.bc("ngForOf",e.educationTypes),r.Ab(1),r.bc("ngIf",e.type.invalid&&e.type.dirty),r.Ab(3),r.bc("selected",""==(null==e.education?null:e.education.level)),r.Ab(2),r.bc("ngIf","T\xedtol universitari"===e.type.value),r.Ab(1),r.bc("ngIf","Cicle formatiu"===e.type.value),r.Ab(1),r.bc("ngIf",e.level.invalid&&e.level.dirty),r.Ab(3),r.bc("ngIf",e.name.invalid&&e.name.dirty&&""===e.name.value),r.Ab(1),r.bc("ngIf",e.name.dirty&&e.name.invalid&&e.name.value.length<3&&e.name.value.length>0),r.Ab(1),r.bc("ngIf",e.name.dirty&&e.name.invalid&&e.name.value.length>55),r.Ab(3),r.bc("ngIf",e.university.invalid&&e.university.dirty&&""===e.university.value),r.Ab(1),r.bc("ngIf",e.university.dirty&&e.university.invalid&&e.university.value.length<3&&e.university.value.length>0),r.Ab(1),r.bc("ngIf",e.university.dirty&&e.university.invalid&&e.university.value.length>55),r.Ab(3),r.bc("ngIf",e.finishDate.dirty&&e.finishDate.invalid),r.Ab(1),r.bc("disabled",!e.educationForm.valid),r.Ab(1),r.jc(null!=e.educationIndex?"Update education":"Create education")}}let De=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.us=t,this.activatedRoute=n,this.router=i,this.education={type:"",level:"",name:"",university:""},this.educationTypes=pe,this.universityLevels=he,this.cicleLevels=fe}ngOnInit(){this.educationIndex=parseInt(this.activatedRoute.snapshot.paramMap.get("id")),this.educationIndex=Number.isNaN(this.educationIndex)?null:this.educationIndex,this.user=this.us.userLoggedIn,null!=this.educationIndex&&this.educationIndex>=0&&this.educationIndex<this.user.education.length?(this.title="Edit education",this.buttonTag="Update education",this.education=this.user.education[this.educationIndex]):(this.title="Create new education",this.buttonTag="Create education"),this.createForm()}createForm(){this.educationForm=this.fb.group({type:[this.education.type?this.education.type:null,[a.k.required]],level:[{value:this.education.level?this.education.level:null,disabled:!this.education.level},[a.k.required]],name:[this.education.name?this.education.name:null,[a.k.required,a.k.minLength(3),a.k.maxLength(55)]],university:[this.education.university?this.education.university:null,[a.k.required,a.k.minLength(3),a.k.maxLength(55)]],finishDate:[this.education.finishDate?this.education.finishDate:null,[a.k.pattern("^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]\\d{4}$")]]}),this.type.valueChanges.subscribe(e=>{this.education.level=null,this.educationForm.patchValue({level:""}),""!=e?this.level.enable({emitEvent:!1}):this.level.disable({emitEvent:!1})})}handleEducationForm(){const e={type:this.type.value,level:this.level.value,name:this.name.value,university:this.university.value,finishDate:this.finishDate.value};null!=this.educationIndex?this.user.education[this.educationIndex]=e:this.user.education.push(e),this.us.updateUser(this.user).subscribe(()=>{this.educationIndex?console.log(`Education from user ${this.user.email} updated: `,this.user):console.log(`Created new education from user ${this.user.email}: `,this.user),this.router.navigate(["/user/profile"])})}get type(){return this.educationForm.get("type")}get level(){return this.educationForm.get("level")}get name(){return this.educationForm.get("name")}get university(){return this.educationForm.get("university")}get finishDate(){return this.educationForm.get("finishDate")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-education-crud"]],decls:5,vars:2,consts:[[1,"section-title"],[1,"form-group"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-container"],["formControlName","type",1,"type-input"],["value","",3,"selected"],[3,"selected",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["formControlName","level",1,"level-input"],[4,"ngIf"],["type","text","placeholder","Name","name","name","formControlName","name",1,"name-input"],["type","text","placeholder","Univserity","name","university","formControlName","university",1,"university-input"],["type","text","placeholder","Finish date","name","finishDate","formControlName","finishDate",1,"finish-date-input"],["type","submit",1,"submit-button",3,"disabled"],[3,"selected"],[1,"error"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.Pb(3,"div",1),r.hc(4,Ne,29,17,"form",2),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(2),r.bc("ngIf",t.user))},directives:[i.i,a.m,a.g,a.d,a.j,a.f,a.c,a.h,a.l,i.h,a.a],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.1rem}.input-container[_ngcontent-%COMP%]{margin:15px;position:relative}.finish-date-input[_ngcontent-%COMP%], .level-input[_ngcontent-%COMP%], .name-input[_ngcontent-%COMP%], .type-input[_ngcontent-%COMP%], .university-input[_ngcontent-%COMP%]{margin:0;padding:10px;width:350px}.submit-button[_ngcontent-%COMP%]{padding:10px;width:210px;margin-bottom:50px}.error[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede;padding:10px;border:1px solid #ebccd1;border-radius:4px;margin-right:auto;margin-left:auto;font-size:.8rem;position:absolute;top:0;left:62vw}"]}),e})();var Se=n("RpKo");function Ee(e,t){if(1&e&&(r.Pb(0,"option",12),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(2);r.bc("selected",(null==n.language?null:n.language.name)==e),r.Ab(1),r.kc(" ",e," ")}}function Ue(e,t){1&e&&(r.Pb(0,"div",13),r.ic(1," Name of language is mandatory "),r.Ob())}function $e(e,t){if(1&e&&(r.Pb(0,"option",12),r.ic(1),r.Ob()),2&e){const e=t.$implicit,n=r.Yb(2);r.bc("selected",(null==n.language?null:n.language.level)==e),r.Ab(1),r.kc(" ",e," ")}}function Ye(e,t){1&e&&(r.Pb(0,"div",13),r.ic(1," Level achieved is mandatory "),r.Ob())}function ze(e,t){1&e&&(r.Pb(0,"div",13),r.ic(1," Finish date has to be in DD/MM/YYYY format "),r.Ob())}function Ke(e,t){if(1&e){const e=r.Qb();r.Pb(0,"form",3),r.Wb("ngSubmit",(function(){return r.ec(e),r.Yb().handleLanguageForm()})),r.Pb(1,"div",4),r.Pb(2,"select",5),r.Pb(3,"option",6),r.ic(4,"Select language name"),r.Ob(),r.hc(5,Ee,2,2,"option",7),r.Ob(),r.hc(6,Ue,2,0,"div",8),r.Ob(),r.Pb(7,"div",4),r.Pb(8,"select",9),r.Pb(9,"option",6),r.ic(10,"Select language level"),r.Ob(),r.hc(11,$e,2,2,"option",7),r.Ob(),r.hc(12,Ye,2,0,"div",8),r.Ob(),r.Pb(13,"div",4),r.Lb(14,"input",10),r.hc(15,ze,2,0,"div",8),r.Ob(),r.Pb(16,"button",11),r.ic(17),r.Ob(),r.Ob()}if(2&e){const e=r.Yb();r.bc("formGroup",e.languageForm),r.Ab(3),r.bc("selected",null==(null==e.language?null:e.language.name)),r.Ab(2),r.bc("ngForOf",e.languageNames),r.Ab(1),r.bc("ngIf",e.name.invalid&&e.name.dirty),r.Ab(3),r.bc("selected",""==(null==e.language?null:e.language.level)),r.Ab(2),r.bc("ngForOf",e.languageLevels),r.Ab(1),r.bc("ngIf",e.level.invalid&&e.level.dirty),r.Ab(3),r.bc("ngIf",e.finishDate.dirty&&e.finishDate.invalid),r.Ab(1),r.bc("disabled",!e.languageForm.valid),r.Ab(1),r.jc(null!=e.languageIndex?"Update language":"Create language")}}let Te=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.us=t,this.activatedRoute=n,this.router=i,this.language={name:"",level:"",finishDate:""},this.languageNames=Se.a,this.languageLevels=Se.b}ngOnInit(){this.languageIndex=parseInt(this.activatedRoute.snapshot.paramMap.get("id")),this.languageIndex=Number.isNaN(this.languageIndex)?null:this.languageIndex,this.user=this.us.userLoggedIn,null!=this.languageIndex&&this.languageIndex>=0&&this.languageIndex<this.user.languages.length?(this.title="Edit language",this.buttonTag="Update language",this.language=this.user.languages[this.languageIndex]):(this.title="Create new language",this.buttonTag="Create language"),this.createForm()}createForm(){this.languageForm=this.fb.group({name:[this.language.name?this.language.name:null,[a.k.required]],level:[this.language.level?this.language.level:null,[a.k.required]],finishDate:[this.language.finishDate?this.language.finishDate:null,[a.k.pattern("^(0[1-9]|[12][0-9]|3[01])[/](0[1-9]|1[012])[/]\\d{4}$")]]})}handleLanguageForm(){const e={name:this.name.value,level:this.level.value,finishDate:this.finishDate.value};null!=this.languageIndex?this.user.languages[this.languageIndex]=e:this.user.languages.push(e),this.us.updateUser(this.user).subscribe(()=>{this.languageIndex?console.log(`Languages from user ${this.user.email} updated: `,this.user):console.log(`Created new language from user ${this.user.email}: `,this.user),this.router.navigate(["/user/profile"])})}get name(){return this.languageForm.get("name")}get level(){return this.languageForm.get("level")}get finishDate(){return this.languageForm.get("finishDate")}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.b),r.Kb(s.a),r.Kb(o.a),r.Kb(o.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-language-crud"]],decls:5,vars:2,consts:[[1,"section-title"],[1,"form-group"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-container"],["formControlName","name",1,"name-input"],["value","",3,"selected"],[3,"selected",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["formControlName","level",1,"level-input"],["type","text","placeholder","Finish date","name","finishDate","formControlName","finishDate",1,"finish-date-input"],["type","submit",1,"submit-button",3,"disabled"],[3,"selected"],[1,"error"]],template:function(e,t){1&e&&(r.Pb(0,"div"),r.Pb(1,"h2",0),r.ic(2),r.Ob(),r.Pb(3,"div",1),r.hc(4,Ke,18,10,"form",2),r.Ob(),r.Ob()),2&e&&(r.Ab(2),r.jc(t.title),r.Ab(2),r.bc("ngIf",t.user))},directives:[i.i,a.m,a.g,a.d,a.j,a.f,a.c,a.h,a.l,i.h,a.a],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.1rem}.input-container[_ngcontent-%COMP%]{margin:15px;position:relative}.finish-date-input[_ngcontent-%COMP%], .level-input[_ngcontent-%COMP%], .name-input[_ngcontent-%COMP%]{margin:0;padding:10px;width:350px}.submit-button[_ngcontent-%COMP%]{padding:10px;width:210px;margin-bottom:50px}.error[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede;padding:10px;border:1px solid #ebccd1;border-radius:4px;margin-right:auto;margin-left:auto;font-size:.8rem;position:absolute;top:0;left:62vw}"]}),e})();const Re=[{path:"login",component:b,canActivate:[be]},{path:"register",component:L,canActivate:[be]},{path:"profile",component:de,canActivate:[ge.a],canDeactivate:[me]},{path:"logout",component:N,canActivate:[ge.a]},{path:"education",component:De,canActivate:[ge.a]},{path:"education/:id",component:De,canActivate:[ge.a]},{path:"language",component:Te,canActivate:[ge.a]},{path:"language/:id",component:Te,canActivate:[ge.a]}];let je=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[me],imports:[[o.e.forChild(Re)],o.e]}),e})(),Ge=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.b,a.e,je,a.i]]}),e})()}}]);